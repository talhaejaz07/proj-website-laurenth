---
import { getCollection } from "astro:content";
const blogPostEntries = await getCollection("blogPosts");

import Image from "astro/components/Image.astro";
---

<section>
  {
    blogPostEntries.map((blogPost) => (
      <div class="post">
        <Image
          src={blogPost.data.imageUrl}
          alt={blogPost.data.imageAlt}
          class="cover-image"
          width={600}
          height={400}
        />

        <ul>
          {blogPost.data.tags.map((tag) => (
            <li>{tag}</li>
          ))}
        </ul>

        <p class="author">{`Von ${blogPost.data.author}, ${
          blogPost.data.dateUpdated > blogPost.data.datePublished
            ? blogPost.data.dateUpdated.toLocaleDateString()
            : blogPost.data.datePublished.toLocaleDateString()
        }`}</p>

        <h3>{blogPost.data.title}</h3>

        <div class="description">
          <p>{blogPost.data.description}</p>
          <a href="#">Mehr lesen &gt;</a>
        </div>
      </div>
    ))
  }
</section>

<style lang="scss">
  @use "../abstractStyles/" as *;

  section {
    @include container();

    display: flex;
    flex-wrap: wrap;
    gap: $space-40;
    justify-content: space-around;
  }

  .post {
    max-width: 600px;

    display: flex;
    flex-direction: column;
    gap: $space-30;

    padding: $space-medium;
    background-color: $light-100;
    border-radius: $space-small;
  }

  .cover-image {
    width: 100%;
    max-width: 600px;
    height: auto;
    aspect-ratio: 3/2;
    object-fit: cover;
  }

  ul {
    display: flex;
    flex-wrap: wrap;
    gap: $space-medium;
  }

  li {
    list-style: none;
    @include Nav();
    background-color: $light-200;
    padding: 5px 20px;
    border-radius: 10px;
    border: 1px solid $black-250;
  }

  .author {
    @include Nav();
    text-align: right;
  }

  h3 {
    @include H2();
  }

  .description {
    p,
    a {
      @include P();
    }

    a {
      color: $primary-500;
      text-decoration: none;

      font-weight: 500;
    }
  }
</style>
